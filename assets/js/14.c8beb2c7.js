(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{429:function(_,v,t){"use strict";t.r(v);var s=t(2),l=Object(s.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"dns-解析"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#dns-解析"}},[_._v("#")]),_._v(" DNS 解析")]),_._v(" "),v("p",[_._v("客户端-》本地域名服务器-》根域名服务器-》 顶级域名 COM/NET 服务器-》目标服务器-》本地域名服务器（缓存，发送给客户端）")]),_._v(" "),v("ol",[v("li",[_._v("本地域名服务器查询 URL 对应的 IP（localhost 127.0.0.1)")]),_._v(" "),v("li",[_._v("根服务器")]),_._v(" "),v("li",[_._v("COM 域名服务器（顶级域名服务器），一定会知道谁知道")]),_._v(" "),v("li",[_._v("xxxx 服务器（公司服务器）")]),_._v(" "),v("li",[_._v("返回给本地域名服务器（localhost 127.0.0.1)")]),_._v(" "),v("li",[_._v("本地域名服务器发送给浏览器同时也会缓存 IP 地址")])]),_._v(" "),v("h1",{attrs:{id:"http-建立连接"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#http-建立连接"}},[_._v("#")]),_._v(" HTTP 建立连接")]),_._v(" "),v("ul",[v("li",[_._v("TCP 三次握手")])]),_._v(" "),v("ol",[v("li",[v("p",[_._v("客户端向服务端发送报文，发出请求 syn=1 包,同时会选择一个初始的序列号 seq=n")]),_._v(" "),v("p",[_._v("服务端状态从 LISTEN（监听状态）变成 SYNC_RCVD（同步请求接受状态）")])]),_._v(" "),v("li",[v("p",[_._v("服务器发送确认报文，syn=1,ACK=1（确认），ack=n+1(确认的编号，给确认打上一个编号),seq=k")])]),_._v(" "),v("li",[v("p",[_._v("客户端再向服务端发送确认连接报文，ack=1,seq=n+1,ACK=1, 服务端、客户端 状态变更为 ESTABLISHED")])])]),_._v(" "),v("p",[_._v("客户端有一个机制是超时重传")]),_._v(" "),v("h1",{attrs:{id:"为什么一定要三次握手-明明两次就可以"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#为什么一定要三次握手-明明两次就可以"}},[_._v("#")]),_._v(" 为什么一定要三次握手，明明两次就可以？")]),_._v(" "),v("p",[_._v("TCP 有一个超时重传传机制")]),_._v(" "),v("p",[_._v("其实是为了避免网络信道不可靠的问题，客户端自己发过去的是一个请求连接，而因为网络问题服务端以为是两次，会造成客户端和服务端状态不一致，造成服务端无法关闭")]),_._v(" "),v("ul",[v("li",[_._v("TCP 四次挥手")])]),_._v(" "),v("ol",[v("li",[v("p",[_._v("客户端认为数据发送完成，向服务器发送请求释放连接 FIN=1,Seq=m")])]),_._v(" "),v("li",[v("p",[_._v("服务端发送 ACK 包，确认收到释放连接请求，ACK=1，进入 CLOSE_WAIT 状态，此时服务端不再接收客户端发送的数据了")])]),_._v(" "),v("li",[v("p",[_._v("但服务器还能向客户端发送未发送的数据（单向数据流)，完毕后向客户端发送连接释放请求，服务端进入 LAST-ACK 状态")])]),_._v(" "),v("li",[v("p",[_._v("客户端接收到了释放请求后，向服务端发送确认应答，服务端收到立刻断开连接，客户端进入等待关闭连接 TIME_WAIT 状态，等待一段时间（2MSL）后关闭连接")])])]),_._v(" "),v("h1",{attrs:{id:"持续-2msl"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#持续-2msl"}},[_._v("#")]),_._v(" 持续 2MSL")]),_._v(" "),v("p",[_._v("为了保证服务端正常关闭")])])}),[],!1,null,null,null);v.default=l.exports}}]);