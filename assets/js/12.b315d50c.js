(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{426:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a3431c3e9514405cb684028c8a424446~tplv-k3u1fbpfcp-watermark.image?",alt:"微信图片_20210323172147.jpg"}})]),s._v(" "),a("p",[s._v("相信学过前端的大佬们，都知道 call、apply、bind 是干啥的吧？不会吧、不会真的有人不知道吧（手动狗头，阴阳怪气一秒钟)")]),s._v(" "),a("p",[s._v("众所周知，这三种方法都是改变我们函数中的 this 指向的，为了唤醒回忆，那我在这里先举三个例子帮大家复习一下")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('//定义一个对象，对象中挂载一些属性\nlet obj = {\n  name: "夹心啊",\n  age: 18,\n  type: "美女",\n};\n\nvar name = "Alice";\n\nfunction foo(num1, num2) {\n  console.log(this.name);\n  console.log(this.age);\n  console.log(this.type);\n  console.log(num1 + num2);\n}\nfoo(1,2)\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("猜猜输出什么？是时候考验一下你的 this 指向有没有学好了！")]),s._v(" "),a("p",[s._v("看看结果")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0aab26b51bb4643b162b14f8f8761ac~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}}),s._v("\n你答对了吗？？")]),s._v(" "),a("p",[s._v("好，我们来分析一下输出结果，首先我们要明白的知识点是 foo 里面 this 指向是什么？好了，可能又有宝子们不太了解，那还能怎么办，继续讲解！")]),s._v(" "),a("h3",{attrs:{id:"this-绑定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#this-绑定"}},[s._v("#")]),s._v(" this 绑定")]),s._v(" "),a("h4",{attrs:{id:"默认绑定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#默认绑定"}},[s._v("#")]),s._v(" "),a("strong",[s._v("默认绑定")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("this 所处得词法作用域在哪里生效了，this 就绑定了在哪里")])]),s._v(" "),a("li",[a("p",[s._v("单独使用 this，它指向全局(Global)对象")])]),s._v(" "),a("li",[a("p",[s._v("在严格模式下，全局对象无法进行默认绑定，所以导致 this 只能绑定在 undefined 上")])])]),s._v(" "),a("h4",{attrs:{id:"隐式绑定规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#隐式绑定规则"}},[s._v("#")]),s._v(" "),a("strong",[s._v("隐式绑定规则")])]),s._v(" "),a("ul",[a("li",[s._v("当函数引用有上下文对象时， 隐式绑定就会把函数调用中的这个 this 绑定到这个上下文对象，即谁调用谁就是爹")])]),s._v(" "),a("h4",{attrs:{id:"隐式丢失"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#隐式丢失"}},[s._v("#")]),s._v(" "),a("strong",[s._v("隐式丢失")])]),s._v(" "),a("ul",[a("li",[s._v("当隐式绑定的函数丢失了绑定对象，就会应用默认绑定")])]),s._v(" "),a("h4",{attrs:{id:"显示绑定规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#显示绑定规则"}},[s._v("#")]),s._v(" "),a("strong",[s._v("显示绑定规则")])]),s._v(" "),a("ul",[a("li",[s._v("apply bind call 可以强行指定函数的 this 指向")])]),s._v(" "),a("p",[s._v("所以很显然，上面的 foo 函数是在全局下调用的，命中"),a("strong",[s._v("默认绑定")]),s._v("，所以它的 this 指向的就是我们全局，而我们全局作用于下只定义了一个 name，却没有 age 和 type，所以当然输出的分别是 Alice、Undefined、Undefined 和传入相加的数字 3 咯。")]),s._v(" "),a("p",[s._v("那如果我们在 obj 内挂载一个 foo 属性让它等于外部的 foo 函数,再调用会输出什么呢？")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("obj.foo=foo\nobj.foo(1,2)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/61a823bdfad544fe98b5089f6f2f8230~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}}),s._v("\nfoo 的 this 指向了 obj,这显而易见了，是命中了"),a("strong",[s._v("隐式绑定规则")]),s._v("谁调用谁是 this 的爹")]),s._v(" "),a("p",[s._v("难度升级 👀\n通过上面一番赋值操作，obj 里面应该有个 foo 了且内部逻辑和外部 foo 函数一模一样")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('let obj = {\n  name: "夹心啊",\n  age: 18,\n  type: "美女",\n  foo:function(num1, num2) {\n          console.log(this.name);\n          console.log(this.age);\n          console.log(this.type);\n          console.log(num1 + num2);\n    }\n};\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ab65016af19d482ba11d68f95806f4fa~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}}),s._v("\n是这样毫无疑问吧。")]),s._v(" "),a("p",[s._v("那如果我将 obj 中的 foo 再赋给一个变量，调用该变量了呢")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("var test=obj.foo\n//调用foo发生什么？\ntest(1,2)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("看看结果\n"),a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f9b3a2c300414bda99218d3f5ee31409~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),a("p",[s._v("嗯？怎么会这样？？？为什么 foo 中的 this 指向了全局？？你现在肯定是满脸黑人问号，这个 foo 不是在 obj 里面吗，为什么还指向了全局？？")]),s._v(" "),a("p",[s._v("停停停，咱们的 foo 是在 obj 里面没错，但是宝子，问题来了！你没调用啊！你只是把 foo 这个函数又从 obj 里面拿到了外面在全局下调用了，属于典型的"),a("strong",[s._v("隐式丢失")]),s._v("了。")]),s._v(" "),a("p",[s._v("举个例子，foo 是个手电筒，obj 调用 foo 相当于你晚上在家里把手电筒打开了，手电筒只能照亮你家，照不到外面。但是你出去散步，你把手电筒从家里带出来了，你在外面把手电筒打开，手电筒还能照亮你家吗？当然不能啦！！它现在只能照亮野外的路。")]),s._v(" "),a("p",[s._v("那明白了上面几点，那我们使用 call、apply、bind 这样来搞一下，分别输出什么呢？")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("foo.call(obj,1,2)\n\nfoo.apply(obj,[1,2])\n\nvar newFoo=foo.bind(obj)\nnewFoo(1,2)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("看看结果")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76a230a9155c44298fadb087815fc404~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4061437c20d74cddbdd2cff483288ea3~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9c8469ef0bae4f9e9206aacee5179745~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),a("p",[s._v("好家伙！谁看了不惊呼一句好家伙，三个都集体输出了 obj 对象的属性，说明 call、apply、bind 这三个方法集体改变了 foo()里面原本的 this 指向，把它强行掰弯到了 obj 的身上了")]),s._v(" "),a("p",[s._v("接下来是个小扩展")]),s._v(" "),a("h3",{attrs:{id:"箭头函数中的-this"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#箭头函数中的-this"}},[s._v("#")]),s._v(" 箭头函数中的 this")]),s._v(" "),a("p",[a("strong",[s._v("通常来说箭头函数是没有自己的 this 的,它的 this 继承上下文的 this")])]),s._v(" "),a("h4",{attrs:{id:"定义在全局作用域下的箭头函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定义在全局作用域下的箭头函数"}},[s._v("#")]),s._v(" 定义在全局作用域下的箭头函数")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a9574c32bf3547a989fd2100bdc6b3c0~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}}),s._v("\n毫无疑问依旧输出全局作用域下的 name 即 Alice")]),s._v(" "),a("h4",{attrs:{id:"定义在作用域中的箭头函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定义在作用域中的箭头函数"}},[s._v("#")]),s._v(" 定义在作用域中的箭头函数")]),s._v(" "),a("p",[s._v("那如果我在普通函数中定义一个计时器，计数器回调为箭头函数")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('var objfun = function () {\n  this.name = "夹心啊";\n  this.age = 18;\n  this.type = "美女";\n  setTimeout(() => {\n    console.log(this.name);\n  });\n};\nobjfun()\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("调用 objfun()定时器会输出什么呢")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8e695946b13c4702a44c0c252fa891ef~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}}),s._v('\n显然箭头函数集成到了 objfun 内部的 this 输出了"夹心啊"')]),s._v(" "),a("p",[s._v("讲明白了 this 的原理,下一篇我们来看看如何实现 call、apply、bind 吧")]),s._v(" "),a("p",[s._v("[下一篇：面试官：手写一个 call、apply、bind 我瞧瞧之 call（二）]")])])}),[],!1,null,null,null);a.default=e.exports}}]);